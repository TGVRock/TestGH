import{d as D,u as K,a as H,b as L,r as p,w as S,c as C,e as w,f as r,t as h,F as A,g as O,h as u,o as m,i as x,j as E,n as T,k,l as I,m as F,_ as q}from"./index-3663960e.js";import{c as j,i as z,g as P,a as R}from"./account-b4451352.js";import{g as G,i as J}from"./mosaic-f8846113.js";import{g as V}from"./namespace-6502bf54.js";import{_ as Q}from"./SelectboxComponent.vue_vue_type_script_setup_true_lang-a71bf0b8.js";import{_ as W}from"./TextAreaComponent.vue_vue_type_script_setup_true_lang-d0bd89d8.js";import{_ as X}from"./ModalComponent.vue_vue_type_script_setup_true_lang-1ea56b5d.js";const N=D("account",()=>{const e=K(),f=H(),d=L(),o=p(""),l=p(void 0),t=p(void 0),a=p(void 0),b=p([]),y=p([]);return S([()=>e.privateKey,()=>e.useSSS,()=>d.sssLinked],()=>{const n="account store watch (settings):";if(e.logger.debug(n,"start"),o.value="",l.value=void 0,d.sssLinked&&e.useSSS)e.logger.debug(n,"sss address."),o.value=d.address;else if(e.privateKey.length>0){if(e.logger.debug(n,"private key account."),l.value=j(e.privateKey,f.networkType),typeof l.value>"u"){e.logger.error(n,"create account failed.");return}o.value=l.value.address.plain()}else e.logger.debug(n,"address not settings.");e.logger.debug(n,"end")},{immediate:!0}),S(o,()=>{const n="account store watch (address):";if(e.logger.debug(n,"start",o.value),t.value=void 0,a.value=void 0,!z(o.value)){e.logger.error(n,"address invalid.");return}P(o.value).then(g=>{t.value=g}).catch(g=>{e.logger.error(n,"get account info failed.",g),t.value=void 0}),R(o.value).then(g=>{a.value=g}).catch(g=>{e.logger.error(n,"get multisig info failed.",g),a.value=void 0}),e.logger.debug(n,"end")},{immediate:!0}),S(t,()=>{const n="account store watch (account info):";if(e.logger.debug(n,"start",t.value),b.value=[],y.value=[],typeof t.value>"u"){e.logger.error(n,"account info invalid.");return}const g=t.value.address;G(g).then(async _=>{const i=[];_.forEach(s=>{i.push(s.id)}),V(i).then(s=>{i.forEach(c=>{const M=s.find(B=>B.mosaicId.equals(c)),U=typeof M>"u"||M.names.length===0?"":M==null?void 0:M.names[0].name;b.value.push({id:c,alias:U})})}).catch(s=>{e.logger.error(n,"get mosaics names failed.",s),y.value=[]})}).catch(_=>{e.logger.error(n,"get mosaics failed.",_),b.value=[]});const $=[];t.value.mosaics.forEach(_=>{$.push(_.id)}),V($).then(_=>{$.forEach(i=>{const s=_.find(M=>M.mosaicId.equals(i)),c=typeof s>"u"||s.names.length===0?"":s==null?void 0:s.names[0].name;y.value.push({id:i,alias:c})})}).catch(_=>{e.logger.error(n,"get mosaics names failed.",_),y.value=[]}),e.logger.debug(n,"end")},{immediate:!0}),{addressStr:o,accountInfo:t,multisigInfo:a,createdMosaics:b,owendMosaics:y}}),Y={class:"row my-2"},Z={class:"col-md-3 col-form-label"},ee={class:"col-md-9"},ae=["value"],te=["value"],se=C({__name:"CreatedMosaicAreaComponent",props:{value:null},emits:["update:value"],setup(e,{emit:f}){const d=N(),o=l=>{const t=l.target;f("update:value",t.value)};return(l,t)=>(m(),w("div",Y,[r("label",Z,h(l.$t("mosaicInfo.id")),1),r("div",ee,[r("select",{"aria-label":"owned-mosaic",value:e.value,onChange:o,class:"form-select"},[(m(!0),w(A,null,O(u(d).createdMosaics,a=>(m(),w("option",{key:a.id.toHex(),value:a.id.toHex()},h(a.alias.length>0?a.alias+" (ID: "+a.id.toHex()+")":a.id.toHex()),9,te))),128))],40,ae)])]))}}),oe={class:"row my-2"},ne={class:"col-md-3 col-form-label"},le={class:"col-md-9"},re=["value"],ie=["value"],ce=C({__name:"OwnedMosaicAreaComponent",props:{value:null},emits:["update:value"],setup(e,{emit:f}){const d=N(),o=l=>{const t=l.target;f("update:value",t.value)};return(l,t)=>(m(),w("div",oe,[r("label",ne,h(l.$t("mosaicInfo.id")),1),r("div",le,[r("select",{"aria-label":"owned-mosaic",value:e.value,onChange:o,class:"form-select"},[(m(!0),w(A,null,O(u(d).owendMosaics,a=>(m(),w("option",{key:a.id.toHex(),value:a.id.toHex()},h(a.alias.length>0?a.alias+" (ID: "+a.id.toHex()+")":a.id.toHex()),9,ie))),128))],40,re)])]))}}),ue={class:"row my-2"},de={class:"col-md-3 col-form-label"},ve={class:"col-md-9"},me=C({__name:"NetworkTypeAreaComponent",props:{value:null},emits:["update:value"],setup(e,{emit:f}){const d=o=>{const l=o.target;f("update:value",Number(l.value))};return(o,l)=>(m(),w("div",ue,[r("label",de,h(o.$t("settings.netType")),1),r("div",ve,[x(Q,{value:e.value,onChange:d,attributes:{ariaLabel:"network-type"},items:[{key:"MAIN",value:u(E.NetworkType).MAIN_NET,display:o.$t("networkTypes.main")},{key:"TEST",value:u(E.NetworkType).TEST_NET,display:o.$t("networkTypes.test")}]},null,8,["value","items"])])]))}});var v=(e=>(e.CreatedMosaic="CreatedMosaic",e.OwendMosaic="OwendMosaic",e.ArbitraryMosaic="ArbitraryMosaic",e))(v||{});const ge={class:"container animate__animated animate__fadeIn"},_e={class:"row my-2"},pe={class:"col-lg-3 d-lg-grid gap-lg-2 mt-2 mb-auto"},fe={class:"col-lg-9 tab-content"},he={class:"row my-2 text-center"},be={class:"col-sm-12"},ye=C({__name:"TopView",setup(e){const f=H(),d=N(),o=F(),l=p(f.networkType),t=p(v.ArbitraryMosaic),a=p(""),b=p(!1),y=p("mosaicIdInvalid");function n(){t.value=v.CreatedMosaic}function g(){t.value=v.OwendMosaic}function $(){t.value=v.ArbitraryMosaic}function _(){if(!J(a.value)){b.value=!0,y.value="mosaicIdInvalid";return}o.push({name:"ViewerResult",params:{netType:l.value,mosaicId:a.value}})}return(i,s)=>(m(),w(A,null,[r("section",ge,[r("section",_e,[r("div",pe,[r("div",{class:T(["col-4 col-lg-12 btn text-lg-start",{"btn-success":t.value===u(v).CreatedMosaic,disabled:u(d).createdMosaics.length===0}]),onClick:n},h(i.$t("viewer.modeCreated")),3),r("div",{class:T(["col-4 col-lg-12 btn text-lg-start",{"btn-success":t.value===u(v).OwendMosaic,disabled:u(d).owendMosaics.length===0}]),onClick:g},h(i.$t("viewer.modeOwned")),3),r("div",{class:T(["col-4 col-lg-12 btn text-lg-start",{"btn-success":t.value===u(v).ArbitraryMosaic}]),onClick:$},h(i.$t("viewer.modeArbitrary")),3)]),r("div",fe,[t.value===u(v).CreatedMosaic?(m(),k(se,{key:0,class:"animate__animated animate__fadeIn",value:a.value,"onUpdate:value":s[0]||(s[0]=c=>a.value=c)},null,8,["value"])):I("",!0),t.value===u(v).OwendMosaic?(m(),k(ce,{key:1,class:"animate__animated animate__fadeIn",value:a.value,"onUpdate:value":s[1]||(s[1]=c=>a.value=c)},null,8,["value"])):I("",!0),t.value===u(v).ArbitraryMosaic?(m(),k(me,{key:2,class:"animate__animated animate__fadeIn",value:l.value,"onUpdate:value":s[2]||(s[2]=c=>l.value=c)},null,8,["value"])):I("",!0),t.value===u(v).ArbitraryMosaic?(m(),k(W,{key:3,class:"animate__animated animate__fadeIn","item-name":i.$t("mosaicInfo.id"),placeholder:i.$t("writer.pleaseInputItem",{item:i.$t("mosaicInfo.id")}),value:a.value,"onUpdate:value":s[3]||(s[3]=c=>a.value=c)},null,8,["item-name","placeholder","value"])):I("",!0),r("div",he,[r("div",be,[r("button",{type:"button",class:"btn btn-primary",onClick:_},h(i.$t("viewer.readData")),1)])])])])]),x(X,{"is-shown":b.value,"onUpdate:is-shown":s[4]||(s[4]=c=>b.value=c),title:i.$t("viewer.errorTitle"),message:i.$t("viewer.errorMessage."+y.value)},null,8,["is-shown","title","message"])],64))}});const Te=q(ye,[["__scopeId","data-v-ef08babb"]]);export{Te as default};
